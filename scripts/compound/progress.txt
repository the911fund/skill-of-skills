# Compound Product Progress Log
Started: Sun Feb  1 00:08:56 MST 2026
---

## Codebase Patterns
- Trending query located in web/src/lib/queries/tools.ts (getTrendingTools function)
- Database schema uses Prisma ORM defined in web/prisma/schema.prisma
- GitHub stars stored in `stars` field (not github_stars) in Tool model
- API endpoints follow pattern: web/src/app/api/v1/{resource}/{action}/route.ts
- Current fallback uses compositeScore instead of stars (PRD requires stars)

---

## 2026-02-01 00:10 - T-001
- Located trending tools query in codebase
- Files identified:
  - web/src/lib/queries/tools.ts - contains getTrendingTools() function (lines 78-104)
  - web/src/app/api/v1/tools/trending/route.ts - API endpoint that exposes trending tools
- **Learnings for future iterations:**
  - Existing code already has fallback mechanism (lines 90-101 in tools.ts)
  - Current fallback uses `compositeScore DESC` ordering
  - PRD requirement is to use `stars DESC` (GitHub stars) instead
  - Database field is named `stars` not `github_stars` in schema
  - Query uses Prisma ORM with prisma.tool.findMany()
---

## 2026-02-01 00:12 - T-002
- Located homepage rendering code
- Homepage file: web/src/app/page.tsx
- Currently displays "Recently Added" section (lines 71-79), NOT trending tools
- getTrendingTools() function exists but not used on homepage
- README generation API (web/src/app/api/v1/readme/route.ts) shows same issue - displays "*No trending tools yet*" when no trending data
- **Learnings for future iterations:**
  - Homepage uses `getTools({ sort: 'recent' }, 1, 6)` for recent tools
  - The main task is to fix the fallback in getTrendingTools() to use stars instead of compositeScore
  - No need to add trending section to homepage - just fix the fallback logic
---

## 2026-02-01 00:14 - T-003
- Documented current query logic from web/src/lib/queries/tools.ts
- Primary query (lines 79-88):
  - WHERE: isActive=true, validationStatus IN ['passed','skipped'], trendingScore > 0
  - ORDER BY: trendingScore DESC
  - LIMIT: parameterized (default 10, README API uses 6)
- Fallback query (lines 91-100):
  - WHERE: same as primary but NO trendingScore filter
  - ORDER BY: compositeScore DESC (THIS NEEDS TO CHANGE TO stars DESC)
  - LIMIT: same as primary
- **Learnings for future iterations:**
  - Empty detection already exists (line 91: if tools.length === 0)
  - Only need to change orderBy from compositeScore to stars in fallback
---

## 2026-02-01 00:15 - T-004
- Verified database schema in web/prisma/schema.prisma
- Confirmed 'tools' table (line 72) has 'stars' field (line 93)
- Field type: Int @default(0)
- No schema changes required
- **Learnings for future iterations:**
  - Field is named 'stars' NOT 'github_stars'
  - Ready to proceed with implementation - all prerequisites met
---
